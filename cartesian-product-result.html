<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>카티전 곱 결과 설명</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }
        h2 {
            color: #34495e;
            margin-top: 30px;
        }
        .container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        .table-container {
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        th {
            background-color: #3498db;
            color: white;
            padding: 10px;
            text-align: left;
        }
        td {
            padding: 8px;
            border-bottom: 1px solid #ecf0f1;
        }
        tr:hover {
            background-color: #f8f9fa;
        }
        .highlight {
            background-color: #fff3cd !important;
        }
        .result-table {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-top: 20px;
        }
        .warning {
            background-color: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 20px 0;
        }
        .correct {
            background-color: #d4edda;
            border-left: 4px solid #28a745;
            padding: 15px;
            margin: 20px 0;
        }
        .sql-code {
            background-color: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
        }
        .arrow {
            text-align: center;
            font-size: 30px;
            color: #e74c3c;
            margin: 20px 0;
        }
        .duplicate-indicator {
            color: #e74c3c;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>실습 8-1: 카티전 곱(Cartesian Product) 결과 상세 설명</h1>
    
    <div class="sql-code">
        SELECT * FROM EMP, DEPT ORDER BY EMPNO;
    </div>

    <h2>1️⃣ 원본 테이블</h2>
    <div class="container">
        <div class="table-container">
            <h3>EMP 테이블 (14행)</h3>
            <table>
                <thead>
                    <tr>
                        <th>EMPNO</th>
                        <th>ENAME</th>
                        <th>DEPTNO</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="highlight">
                        <td>7369</td>
                        <td>SMITH</td>
                        <td>20</td>
                    </tr>
                    <tr>
                        <td>7499</td>
                        <td>ALLEN</td>
                        <td>30</td>
                    </tr>
                    <tr>
                        <td>7521</td>
                        <td>WARD</td>
                        <td>30</td>
                    </tr>
                    <tr>
                        <td colspan="3">... (총 14명)</td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <div class="table-container">
            <h3>DEPT 테이블 (4행)</h3>
            <table>
                <thead>
                    <tr>
                        <th>DEPTNO</th>
                        <th>DNAME</th>
                        <th>LOC</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>10</td>
                        <td>ACCOUNTING</td>
                        <td>NEW YORK</td>
                    </tr>
                    <tr>
                        <td>20</td>
                        <td>RESEARCH</td>
                        <td>DALLAS</td>
                    </tr>
                    <tr>
                        <td>30</td>
                        <td>SALES</td>
                        <td>CHICAGO</td>
                    </tr>
                    <tr>
                        <td>40</td>
                        <td>OPERATIONS</td>
                        <td>BOSTON</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="arrow">⬇️ 조인 조건 없이 결합 ⬇️</div>

    <h2>2️⃣ 카티전 곱 결과 (56행 = 14 × 4)</h2>
    
    <div class="warning">
        <strong>⚠️ 문제점:</strong> SMITH(사원번호 7369)를 보세요! 
        원래는 20번 부서 소속인데, 결과에서는 10, 20, 30, 40 모든 부서와 매칭되어 4번 나타납니다.
    </div>

    <div class="result-table">
        <h3>결과 테이블 (처음 8행만 표시)</h3>
        <table>
            <thead>
                <tr>
                    <th>EMPNO</th>
                    <th>ENAME</th>
                    <th>EMP.DEPTNO</th>
                    <th>DEPT.DEPTNO</th>
                    <th>DNAME</th>
                    <th>LOC</th>
                    <th>문제점</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>7369</td>
                    <td>SMITH</td>
                    <td>20</td>
                    <td class="duplicate-indicator">10</td>
                    <td>ACCOUNTING</td>
                    <td>NEW YORK</td>
                    <td>❌ 잘못된 매칭</td>
                </tr>
                <tr class="highlight">
                    <td>7369</td>
                    <td>SMITH</td>
                    <td>20</td>
                    <td>20</td>
                    <td>RESEARCH</td>
                    <td>DALLAS</td>
                    <td>✅ 올바른 매칭</td>
                </tr>
                <tr>
                    <td>7369</td>
                    <td>SMITH</td>
                    <td>20</td>
                    <td class="duplicate-indicator">30</td>
                    <td>SALES</td>
                    <td>CHICAGO</td>
                    <td>❌ 잘못된 매칭</td>
                </tr>
                <tr>
                    <td>7369</td>
                    <td>SMITH</td>
                    <td>20</td>
                    <td class="duplicate-indicator">40</td>
                    <td>OPERATIONS</td>
                    <td>BOSTON</td>
                    <td>❌ 잘못된 매칭</td>
                </tr>
                <tr style="background-color: #ecf0f1;">
                    <td colspan="7" style="text-align: center; font-weight: bold;">
                        ⬆️ SMITH 한 명이 4개 부서 모두와 매칭됨 (4행) ⬆️
                    </td>
                </tr>
                <tr>
                    <td>7499</td>
                    <td>ALLEN</td>
                    <td>30</td>
                    <td class="duplicate-indicator">10</td>
                    <td>ACCOUNTING</td>
                    <td>NEW YORK</td>
                    <td>❌ 잘못된 매칭</td>
                </tr>
                <tr>
                    <td>7499</td>
                    <td>ALLEN</td>
                    <td>30</td>
                    <td class="duplicate-indicator">20</td>
                    <td>RESEARCH</td>
                    <td>DALLAS</td>
                    <td>❌ 잘못된 매칭</td>
                </tr>
                <tr class="highlight">
                    <td>7499</td>
                    <td>ALLEN</td>
                    <td>30</td>
                    <td>30</td>
                    <td>SALES</td>
                    <td>CHICAGO</td>
                    <td>✅ 올바른 매칭</td>
                </tr>
            </tbody>
        </table>
        <p style="text-align: center; color: #7f8c8d;">... 이런 식으로 총 56행이 생성됨 ...</p>
    </div>

    <h2>3️⃣ 왜 이런 결과가 나오는가?</h2>
    
    <div class="table-container">
        <h3>카티전 곱의 동작 원리</h3>
        <ol>
            <li><strong>첫 번째 사원(7369 SMITH)을 가져옴</strong></li>
            <li><strong>DEPT의 모든 행과 하나씩 결합:</strong>
                <ul>
                    <li>SMITH + 10번 부서 (ACCOUNTING)</li>
                    <li>SMITH + 20번 부서 (RESEARCH) ← 실제 부서</li>
                    <li>SMITH + 30번 부서 (SALES)</li>
                    <li>SMITH + 40번 부서 (OPERATIONS)</li>
                </ul>
            </li>
            <li><strong>두 번째 사원(7499 ALLEN)을 가져옴</strong></li>
            <li><strong>똑같이 DEPT의 모든 행과 결합</strong></li>
            <li><strong>14명 모두에 대해 반복 → 14 × 4 = 56행</strong></li>
        </ol>
    </div>

    <div class="correct">
        <h3>✅ 올바른 해결 방법 (실습 8-2)</h3>
        <div class="sql-code">
            SELECT * FROM EMP, DEPT 
            WHERE EMP.DEPTNO = DEPT.DEPTNO  -- 조인 조건 추가!
            ORDER BY EMPNO;
        </div>
        <p><strong>결과:</strong> 14행만 출력 (각 사원이 실제 소속 부서와만 매칭)</p>
        <ul>
            <li>SMITH는 20번 부서(RESEARCH)와만 매칭</li>
            <li>ALLEN은 30번 부서(SALES)와만 매칭</li>
            <li>각 사원이 자신의 부서 정보와만 결합</li>
        </ul>
    </div>

    <h2>4️⃣ 핵심 정리</h2>
    <div class="table-container">
        <table>
            <tr>
                <th>항목</th>
                <th>카티전 곱 (실습 8-1)</th>
                <th>올바른 조인 (실습 8-2)</th>
            </tr>
            <tr>
                <td>조인 조건</td>
                <td>❌ 없음</td>
                <td>✅ WHERE EMP.DEPTNO = DEPT.DEPTNO</td>
            </tr>
            <tr>
                <td>결과 행 수</td>
                <td>56행 (14 × 4)</td>
                <td>14행</td>
            </tr>
            <tr>
                <td>SMITH의 부서</td>
                <td>10, 20, 30, 40 (4개)</td>
                <td>20 (1개)</td>
            </tr>
            <tr>
                <td>실무 사용</td>
                <td>❌ 절대 사용 안 함</td>
                <td>✅ 정상적인 조인</td>
            </tr>
        </table>
    </div>
</body>
</html>